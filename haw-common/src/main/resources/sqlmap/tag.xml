<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="tagMapper">
	<insert id="tagInsert" useGeneratedKeys="true" keyColumn="tag_no" keyProperty="tag_no">
	<!-- 태그입력  -->
	<![CDATA[
		INSERT INTO haw.tag (tag_nm)
		VALUES ('도라에몽')
	]]>
	</insert>
	
	<select id="tagSelect">
	<!-- 태그명으로 태그번호 가져오기 (태그 중복여부 체크) -->
	<![CDATA[
		SELECT A.tag_no
		  FROM haw.tag A
		 WHERE A.tag_nm = '피카츄'	
	]]>
	</select>
	
	<select id="tagSelectAll">
	<![CDATA[
		SELECT A.tag_no
		     , A.tag_nm
		     , A.input_dt
		     , A.time_stamp
		  FROM haw.tag A
		 WHERE A.tag_no IN (SELECT CAST(UNNEST(string_to_array(SUBSTR(#{tag_str}, 2, LENGTH(#{tag_str})-2), '|')) AS Integer))
	]]>
	</select>
	
	<delete id="tagDelete">
	<!-- 태그삭제  -->
	<![CDATA[
		DELETE FROM haw.tag
		 WHERE tag_no = 1
	]]>
	</delete>

</mapper>
